<!DOCTYPE html>
<html lang="en">
	<head>
    <link rel="stylesheet" href="blaze.css">
		<script src="../jquery.js"></script>
    <script type="text/javascript"
          src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDGbEUwknHTaKmEpjwM-fRfJt7zbCZZtCI&sensor=false">
      </script>
		<script type="text/javascript" src="typeahead.bundle.js"></script>
    <script type="text/javascript" src="locations.js"></script>

		<script type="text/javascript">
			var substringMatcher = function(strs) {
        return function findMatches(q, cb) {
          var matches, substringRegex;
 
          // an array that will be populated with substring matches
          matches = [];
 
          // regex used to determine if a string contains the substring `q`
          substrRegex = new RegExp(q, 'i');
 
          // iterate through the pool of strings and for any string that
          // contains the substring `q`, add it to the `matches` array
          $.each(strs, function(i, str) {
            if (substrRegex.test(str)) {
              // the typeahead jQuery plugin expects suggestions to a
              // JavaScript object, refer to typeahead docs for more info
              matches.push({ value: str });
            }
          });
 
          cb(matches);
        };
      };

      var newYork = new google.maps.LatLng(40.730098, -73.997861);

      function initializeMap() {
  
        map = new google.maps.Map(document.getElementById('map_canvas'), {
              center: newYork,
              zoom: 14,
              mapTypeId: 'roadmap',
            mapTypeId: google.maps.MapTypeId.ROADMAP, 
            panControl: false,
          mapTypeControl: false,
          streetViewControl:false,
            zoomControl: true,
            zoomControlOptions: {
              style: google.maps.ZoomControlStyle.MEDIUM,
                position: google.maps.ControlPosition.RIGHT_TOP
            }
          });
        }
 


		$(function() {

      initializeMap();

			var substringMatcher = function(strs) {
  				return function findMatches(q, cb) {
    				var matches, substringRegex;
 
    				// an array that will be populated with substring matches
    				matches = [];
 
    				// regex used to determine if a string contains the substring `q`
    				substrRegex = new RegExp( "^" + q, "i" );
 
    				// iterate through the pool of strings and for any string that
    				// contains the substring `q`, add it to the `matches` array
    				$.each(strs, function(i, str) {
                //console.log(str);
      					if (substrRegex.test(str)) {
        					// the typeahead jQuery plugin expects suggestions to a
        					// JavaScript object, refer to typeahead docs for more info
        					matches.push({ value: str });
      					}
    				});
          //console.log(matches)
    			cb(matches);
  				};
			};

			$('.typeahead').typeahead({
  				hint: true,
  				minLength: 1,
  				items: 5

			},
			{
  				
  				name: 'destinations',
  				displayKey: 'value',
  				source: substringMatcher(destinations)
			}).on('typeahead:selected', onSelected).on('typeahead:cursorchanged', onCursorChanged);

      function onSelected($e, obj, datum) {
        //console.log('selected');
        var city = obj.value;
        var result = $.grep(cities, function(e){
          return e.city == city
        });

        //console.log (r);
        var NA = new google.maps.LatLng(result[0].lon, result[0].lat);
        map.panTo(NA);

        //var result = $.grep(myArray, function(e){ return e.id == id; });

      }

      function onCursorChanged($e, obj, datum) {
        var city = obj.value;
        var result = $.grep(cities, function(e){
          return e.city == city
        });

        //console.log (r);
        var NA = new google.maps.LatLng(result[0].lon, result[0].lat);
        map.panTo(NA);

        $("#srl").fadeOut("100", function(){
          $("#srl").fadeIn("100")
        });
      }

		})
		</script>


		<style type="text/css">
			body {font-family: arial; margin:50px 100px;}

			
		</style>

	</head>
	<body>

    <style type="text/css">
      #srl {padding:0; margin:15px; list-style-type: none;}
      #srl li {padding-left:110px; background-repeat: no-repeat; background-position: -70px 0; margin-bottom:20px;}
      #srl li span.wr {font-size: 12px; color:#666;}
      #srl li div.value {overflow:hidden; margin-top:5px;}
      #srl li div.price {color:#D41200; font-size:32px; float:left; margin-right:10px;}
      #srl li div.message {float:left; font-size:12px; color:#999; padding-top:4px;}
    </style>

    <div id="navigation" style="position:absolute; top:0; left:0; bottom:0; width:80px; background-color:#E74C3C;">
      <img src="i/blaze_icons.png" style="margin-left:10px; margin-top:10px"/>
    </div>

    <div id="hotels" style="position:absolute; top: 60px; left:80px; bottom:0; width:400px; background-color: rgb(232, 229, 220); overflow-y:scroll;">
      <ul id="srl">
            <li style="background-image:url('http://media.expedia.com/hotels/1000000/30000/23700/23677/23677_131_e.jpg')">
              <img src="i/stars-3.png" /><br />
              <a href="#" class="name">Grand Hyatt New York</a><br />
              <span class="wr"> Collect  welcome rewards nights</span>
              <div class="value">
                <div class="price">
                  $125
                </div>
                <div class="message">For 1 night<br /> including taxes and fees</div>
              </div>
            </li>
            <li style="background-image: url('http://exp.cdn-hotels.com/hotels/3000000/2250000/2244300/2244255/2244255_55_e.jpg')">
              <img src="i/stars-3.png" /><br />
              <a href="#" class="name">Ace Hotel New York</a><br />
              <span class="wr"> Collect  welcome rewards nights</span>
              <div class="value">
                <div class="price">
                  $140
                </div>
                <div class="message">For 1 night<br /> including taxes and fees</div>
              </div>
            </li>
            <li style="background-image:url('http://exp.cdn-hotels.com/hotels/3000000/2450000/2442800/2442707/2442707_195_e.jpg')">
              <img src="i/stars-3.png" /><br />
              <a href="#" class="name">Hotel Indigo NYC Chelsea</a><br />
              <span class="wr"> Collect  welcome rewards nights</span>
              <div class="value">
                <div class="price">
                  $276
                </div>
                <div class="message">For 1 night<br /> including taxes and fees</div>
              </div>
            </li>
            <li style="background-image:url('http://exp.cdn-hotels.com/hotels/1000000/910000/903500/903465/903465_180_e.jpg')">
              <img src="i/stars-3.png" /><br />
              <a href="#" class="name">Eurostars Wall Street</a><br />
              <span class="wr"> Collect  welcome rewards nights</span>
              <div class="value">
                <div class="price">
                  $95
                </div>
                <div class="message">For 1 night<br /> including taxes and fees</div>
              </div>
            </li>
            <li style="background-image:url('http://exp.cdn-hotels.com/hotels/1000000/810000/801000/800989/800989_82_e.jpg')">
              <img src="i/stars-3.png" /><br />
              <a href="#" class="name">Hotel Chandler</a><br />
              <span class="wr"> Collect  welcome rewards nights</span>
              <div class="value">
                <div class="price">
                  $145
                </div>
                <div class="message">For 1 night<br /> including taxes and fees</div>
              </div>
            </li>
            <li style="background-image:url('http://exp.cdn-hotels.com/hotels/1000000/50000/41900/41864/41864_172_e.jpg')">
              <img src="i/stars-3.png" /><br />
              <a href="#" class="name">The Roosevelt Hotel New York</a><br />
              <span class="wr"> Collect  welcome rewards nights</span>
              <div class="value">
                <div class="price">
                  $109
                </div>
                <div class="message">For 1 night<br /> including taxes and fees</div>
              </div>
            </li>
          </ul>

    </div>

    <div style=" position:absolute; top:60px; right:0; left:480px; bottom:0;">
       <div id="map_canvas" style="width:100%; height:100%;"></div>
    </div>

    <div style="position:absolute;top: 0; left: 80px; right:0 height:60px; background-color:#fff;">
      <div style="padding:10px 15px;">
        <input class="typeahead" placeholder="" autofocus style="border:0; outline:0;"/>
      </div>
        
    </div>
	


    
   
	</body>
</html>